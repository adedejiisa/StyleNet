<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STYLENET - Product Page</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #fff; color: #333; }
    header { background: #fff; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; position:fixed; width:100%; }
    header h1 { margin: 0; font-size: 22px; font-weight: bold; }
    .cart-icon { position: relative; cursor: pointer; }
    .cart-count { position: absolute; top: -8px; right: -8px; background: red; color: white; border-radius: 50%; font-size: 12px; padding: 2px 6px; }
    .categories { margin: 20px; }
    .categories h2 { font-size: 24px; margin: 15px 0; color: #6a5acd; }
    
    /* Carousel container */
    .carousel-container { position: relative;}
    .carousel { display: flex; overflow-x: auto; scroll-behavior: smooth; gap: 15px; padding: 10px;}
    .carousel::-webkit-scrollbar { display: none; } /* Hide scrollbar */
    
    /* Product card */
    .product-card { width: 90%; flex: 0 0 auto; background: #fafafa; border-radius: 10px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
    .product-card img { max-width: 100%; height: 150px; object-fit: contain; border-radius: 6px; }
    .product-card h3 { margin: 10px 0; font-size: 16px; }
    .product-card p { margin: 5px 0; font-weight: bold; }
    button.add-to-cart { background: #6a5acd; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; }
    button.add-to-cart:hover { background: #5746c1; }

    /* Navigation buttons */
    .carousel-btn { position: absolute; top: 40%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 10px; border-radius: 50%; cursor: pointer; }
    .carousel-btn:hover { background: rgba(0,0,0,0.8); }
    .carousel-btn.left { left: -10px; }
    .carousel-btn.right { right: -10px; }
    .success{
  position:fixed;
  right: 0;
  background: #ddd;
  top:0;
  width: 70%;
  border-radius: 20px;
  padding: 10px;
}
  </style>
</head>
<body>
  <header>
    <h1><span style="color:gold">STYLENET</span> - Product Page</h1>
    <div class="cart-icon" onclick="window.location.href='cart.html'">
      <i class="fa fa-shopping-cart fa-2x"></i>
      <span class="cart-count" id="cartCount">0</span>
    </div>
  </header>

  <p style="text-align:center;">Choose any of your choice and get 30% discount</p>

  <div class="categories" id="categoriesContainer">
    <!-- Categories + products (carousel) will be injected here -->
  </div>
.<div id="success">
  
</div>
  <script>
  const success = document.getElementById('success')
    const apiBase = "https://api.escuelajs.co/api/v1";

    // Add to cart
    function addToCart(item) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.push(item);
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
     success.textContent=`
     ${product.title} added to cart`
    }

    // Update cart count
    function updateCartCount() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      document.getElementById("cartCount").textContent = cart.length;
    }

    // Scroll carousel
    function scrollCarousel(id, direction) {
      const carousel = document.getElementById(id);
      const scrollAmount = 220; // px per click
      carousel.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
    }

    // Load categories + products
    async function loadCategoriesAndProducts() {
      try {
        const categoriesRes = await fetch(`${apiBase}/categories`);
        const categories = await categoriesRes.json();
        const container = document.getElementById("categoriesContainer");

        for (let category of categories.slice(0,4)) { // limit to 4 categories
          const carouselId = `carousel-${category.id}`;
          const section = document.createElement("section");
          section.innerHTML = `
            <h2>${category.name}</h2>
            <div class="carousel-container">
              <button class="carousel-btn left" onclick="scrollCarousel('${carouselId}', -1)">&#10094;</button>
              <div class="carousel" id="${carouselId}"></div>
              <button class="carousel-btn right" onclick="scrollCarousel('${carouselId}', 1)">&#10095;</button>
            </div>
          `;
          container.appendChild(section);

          // Fetch products in this category
          const productsRes = await fetch(`${apiBase}/categories/${category.id}/products`);
          const products = await productsRes.json();
          const carousel = document.getElementById(carouselId);

          products.slice(0,10).forEach(product => {
            const card = document.createElement("div");
            card.classList.add("product-card");
            card.innerHTML = `
              <img src="${product.images[0]}" alt="${product.title}">
              <h3>${product.title}</h3>
              <p>$${product.price}</p>
              <button class="add-to-cart">Add to Cart</button>
            `;
            card.querySelector(".add-to-cart").addEventListener("click", () => addToCart(product));
            carousel.appendChild(card);
          });
        }
      } catch (error) {
        console.error("Error loading products:", error);
      }
    }

    // Init
    updateCartCount();
    loadCategoriesAndProducts();
  </script>
</body>
</html>
